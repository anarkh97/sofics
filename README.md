# SOFICS
SOFICS (Structural Optimization through Fluid-structure Interaction and Coupled Simulations) is a software toolkit that optimizes the design of structures exposed to extreme loads generated by detonations. 

# Instructions
The utility depends on four main open-source softwares:

* M2C: the finite volume-based fluid dynamics solver.
* Aero-S: the finite element-based solid dynamics solver.
* GMSH: the finite element mesh generator.
* Dakota: the optimization toolkit.

SOFICS comes with a local snapshot of M2C and Aero-S. Build instructions for those are discussed in the next section. However, one can find the latest versions at [M2C](https://github.com/kevinwgy/m2c) and [Aero-S](https://bitbucket.org/frg/aero-s/src/master/).

## Default build

SOFICS comes with a `CMakeList.txt`, placed in the root directory. To build SOFICS with the local versions of M2C and Aero-S, first make sure that you are in the SOFICS root directory, then follow

```sh
cmake -B build .
cd build
make -j 4
```

The last `make` command compiles SOFICS, M2C, and Aero-S in a parallel manner on `4` processors. You can chose to just run `make` or provide more processors based on your convinience.

A successfull build should provide `checks.sh`, `driver.sh`, `pre_processor.sh`, and `post_processor.sh` bash scripts along with `gmsh2aeros` and `postprocessor` executables in `build/src`. Moreover, `build/packages` should contain directories `aeros` and `m2c`. To check if build for these solvers was successfull try the following commands.

For Aero-S
```sh
cd build
./packages/aeros/bin/aeros
```
The expected output is;
TODO: Add exepected output here.

For M2C
```sh
cd build
./packages/m2c/m2c
```
The expected output is;
TODO: Add expected output here

## Build without M2C or Aero-S

If you have your own versions of M2C or Aero-S, you can choose to not compile the local snapshots. However, when running the optimization make sure to specify the path to relevant executables in a `config.sh` file and provide it to `Dakota`. For detailed instructions on executing fluid-structure coupled optimization studies refer the test cases provided in `root/tests` directory.

SOFICS provides `BUILD_M2C` and `BUILD_AEROS` variables to specify whether to build these softwares or not. For example if you choose not to build M2C follow

```sh
cmake -B build -DBUILD_M2C=OFF .
cd build
make -j 4
```

To check if everything was built correctly perform the checks specified in previous section.

## GMSH


## Dakota